\<!DOCTYPE html>
<html>
  <head>
    <title>Cloud Chat</title>
  </head>
  <body>
    <script src="bower_components/offline/offline.js"></script>
    <h1>Cloud Chat</h1>
    <link rel="stylesheet" href="styles.css" />
    <ul id="messages"></ul>
      <form onsubmit="addMessage(this.messabge.value); return false;">
        <input
          type="text"
          name="messabge"
          placeholder="Enter your message here"
          id="input_btr"
        />
        <input type="submit" value="Send" />
      </form>
    </div>
    <script>
      let username = '';
      let lastSyncTime = 0;

      document.head.appendChild(
        (($, s) => {
          $.src = s;
          return $;
        })(document.createElement('script'), 'cloud.js')
      );
      var test = cloud_chatMessages;
      var cloud_chatMessages = [];

      function addMessage(message) {
        document.getElementById('input_btr').value = '';
        cloud_chatMessages.push(`${message} : ${username}`);
        updateMessages();
      }
      setInterval(updateMessages, 0); // update every 5 seconds

      function updateMessages() {
        let messages = cloud_chatMessages;
        let messagesElement = document.getElementById('messages');
        messagesElement.innerHTML = '';
        for (const message of messages) {
          messagesElement.innerHTML += `<h3>${message}</h3>`;
        }
        lastSyncTime = Date.now();
      }
      function setUsername(newUsername) {
        username = newUsername;
        fmbnsr.hidden = false;
        $('#fm1bnsr'). remove();
        updateMessages();
      }
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      document.head.appendChild(
        (($, s) => {
          $.src = s;
          return $;
        })(document.createElement('script'), 'network.js')
      );
    </script>
    <script>
      const fm1bnsr = document.getElementById('formb3');
      const fmbnsr = document.getElementById('formb2');
      fmbnsr.hidden = true;
    </script>
  </body>
</html>
